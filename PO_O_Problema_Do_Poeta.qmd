---
title: "01: O problema do poeta - Solução básica"
subtitle: "Modelagem e solução do problema do poeta utilizando a formulação básica, sem generalização"
format:
  lumo-html: 
    # logo: "logo.png"                                     # Optional. Path to a logo displayed above the title
    github-repo: "https://github.com/maykongpedro/PO_O_Problema_Do_Poeta"        # Optional. Adds a github corner at the top right
    primary-color: "#69b3a2"
    self-contained: true
    is-particlejs-enabled: true                          # Optional: display interactive particles in the document header
    bg-image: ""                                         # Optional: link to an image for the header background
    code-fold: false     # <<<<<<<<<< SEMPRE MOSTRAR OS CÓDIGOS
    code-tools: true     # (opcional) botões p/ copiar
author: Maykon Pedro
date: last-modified
---

## Introdução

Nesse primeiro documento o problema será resolvido de maneira simplificada, alocando cada valor e restrição diretamente no código, sem pensar em escalonamento dos dados ou formulação genérica.

## Descrição do problema

Um poeta possui **40 ha de Pinus e 50 ha de floresta nativa**. Nos últimos 10 anos, o manejo do Pinus gerou **R\$ 36.000** com **800 dias de trabalho**, e o manejo da floresta nativa gerou **R\$ 60.000** com **1.500 dias de trabalho**.

Ele quer **maximizar a receita anual**, mas pode dedicar no máximo **180 dias/ano** ao manejo. Determine **quantos hectares de cada floresta** ele deve manejar por ano para obter a maior receita possível, respeitando os limites de área disponíveis.

::: column-margin
Esse é um enunciado simplificado do problema. A versão original pode ser consultada nos documentos do projeto.
:::

## Resumo dos dados

**Florestas**:

$$
\begin{aligned}
&\text{Pinus} = 40_{ha} \\
&\text{Nativa} = 50_{ha}
\end{aligned}
$$

**Receita anual por floresta:**

$$
\begin{aligned}
\text{Receita do Pinus}& = \text{R\$ } 36.000  \div  10_\text{anos} \div 40_{ha} \\
\text{Receita do Pinus}& = \text{R\$} 90_{ha/ano}
\end{aligned}
$$

$$
\begin{aligned}
\text{Receita da Nativa}& = \text{R\$ } 60.000  \div  10_\text{anos} \div 50_{ha} \\
\text{Receita da Nativa}& = \text{R\$} 120_{ha/ano}
\end{aligned}
$$

**Restrições de tempo de manejo por floresta:**

$$
\begin{aligned}
\text{Manejo do Pinus}& = 800_{dias}  \div  40_{ha} \div 10_\text{anos} \\
\text{Manejo do Pinus}& = 2_{dias/ha/ano}
\end{aligned}
$$

$$
\begin{aligned}
\text{Manejo de Nativa}& = 1500_{dias}  \div  50_{ha} \div 10_\text{anos} \\
\text{Manejo de Nativa}& = 3_{dias/ha/ano}
\end{aligned}
$$

## Formulação

### Índices/Conjuntos

### Parâmetros

### Variáveis de decisão

### Função objetivo

### Restrições

## Resolução do problema

### 1. Importar bibliotecas

```{python}
import pyomo.environ as pyo
```

### 2. Importar e definir solver

```{python}

# o executável foi instalado via terminal e o python consegue encontrá-lo nativaemente
solver = pyo.SolverFactory("glpk")

# o executável foi baixado no computador
# caminho_do_executavel = "C:/Users/klmp00145394/Documents/glpk-4.65/w64/glpsol.exe"
# solver = pyo.SolverFactory(
#     _name="glpk", 
#     executable=caminho_do_executavel
# )
```

### 3. Declarar modelo

```{python}
modelo = pyo.ConcreteModel()
```

### 4. Declarar índices, parâmetros e variáveis de decisão

### 4.1 Índices
Não utilizado nesse capítulo, pois trata-se de uma formulação direta.

### 4.2 Parâmetros
Não utilizado nesse capítulo, pois trata-se de uma formulação direta.

### 4.3 Variáveis de decisão
```{python}
modelo.x1_area_pinus = pyo.Var(within=pyo.NonNegativeReals)
modelo.x2_area_nativa = pyo.Var(within=pyo.NonNegativeReals)
```

### 5. Declarar função objetivo

```{python}
modelo.fo_z_receita = pyo.Objective(
  expr=90 * modelo.x1_area_pinus + 120 * modelo.x2_area_nativa, sense=pyo.maximize
)
```

### 6. Declarar restrições

```{python}
modelo.restricao_tempo_disp = pyo.Constraint(
  expr=2 * modelo.x1_area_pinus + 3 * modelo.x2_area_nativa <= 180
)

modelo.restricao_area_pinus = pyo.Constraint(expr=modelo.x1_area_pinus <= 40)

modelo.restricao_area_nativas = pyo.Constraint(expr=modelo.x2_area_nativa <= 50)
```

### 7. Resolver modelo

```{python}
# dando uma olhada na construção do modelo
modelo.pprint()
```

```{python}
# usando o solver para resolver o modelo
resultado = solver.solve(modelo)
```

### 8. Exportar resultados

```{python}
# resultados brutos do modelo
resultado.write
```


```{python}
# resultados organizados
print("\n===== RESULTADOS DO MODELO =====")
print(f"Status da otimização: {resultado.solver.status}")
print(f"Condição de término: {resultado.solver.termination_condition}")
print(f"Receita máxima (z) = R${pyo.value(modelo.fo_z_receita):.2f}")
print(f"Área manejada de Pinus (x1) = {modelo.x1_area_pinus.value:.2f} hectares")
print(f"Área manejada de Nativa (x2) = {modelo.x2_area_nativa.value:.2f} hectares")
```